{% load static %}
<!DOCTYPE html>
<html lang="en" data-theme="business">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Hisaab - Professional Finance Tracker{% endblock %}</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ’¼</text></svg>">
    
    <!-- Tailwind CSS + DaisyUI -->
    <link rel="stylesheet" href="{% static 'css/output.css' %}">
    
    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-base-200 dark:bg-slate-950 min-h-screen font-sans antialiased transition-colors duration-200">
    <!-- Professional Slim Header -->
    <header class="bg-primary-900 border-b border-primary-800 sticky top-0 z-50 shadow-lg">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo & Brand -->
                <div class="flex items-center gap-8">
                    <a href="{% url 'expenses:dashboard' %}" class="flex items-center gap-3 group">
                        <div class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center group-hover:bg-white/20 transition-all duration-300">
                            <i class="bi bi-wallet2 text-white text-xl"></i>
                        </div>
                        <span class="text-white text-xl font-bold tracking-tight">Hisaab</span>
                    </a>
                    
                    <!-- Desktop Navigation -->
                    {% if user.is_authenticated %}
                    <div class="hidden md:flex items-center gap-1">
                        <a href="{% url 'expenses:dashboard' %}" 
                           class="px-4 py-2 text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">
                            Dashboard
                        </a>
                        <a href="{% url 'expenses:transactions' %}" 
                           class="px-4 py-2 text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">
                            Transactions
                        </a>
                        <a href="{% url 'expenses:view_budget' %}" 
                           class="px-4 py-2 text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">
                            Budgets
                        </a>
                    </div>
                    {% endif %}
                </div>
                
                <!-- Right Side - User Menu -->
                <div class="flex items-center gap-4">
                    {% if user.is_authenticated %}
                        <!-- Mobile Menu Button -->
                        <div class="md:hidden">
                            <button class="btn btn-ghost btn-sm text-white">
                                <i class="bi bi-list text-xl"></i>
                            </button>
                        </div>
                        
                        <!-- User Dropdown -->
                        <div class="dropdown dropdown-end">
                            <label tabindex="0" class="btn btn-ghost btn-sm gap-2 text-white hover:bg-white/10">
                                <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center">
                                    <span class="text-sm font-semibold">{{ user.username|first|upper }}</span>
                                </div>
                                <span class="hidden sm:inline text-sm font-medium">{{ user.username }}</span>
                                <i class="bi bi-chevron-down text-xs"></i>
                            </label>
                            <ul tabindex="0" class="dropdown-content menu p-2 shadow-xl bg-base-100 rounded-lg w-56 mt-2 border border-base-300">
                                <li class="menu-title px-4 py-2">
                                    <span class="text-primary-900 font-semibold">Account</span>
                                </li>
                                <li>
                                    <a href="#" class="text-sm">
                                        <i class="bi bi-person"></i>
                                        Profile Settings
                                    </a>
                                </li>
                                <li>
                                    <a href="#" class="text-sm">
                                        <i class="bi bi-gear"></i>
                                        Preferences
                                    </a>
                                </li>
                                <div class="divider my-1"></div>
                                <li>
                                    <button onclick="toggleDarkMode()" class="text-sm w-full">
                                        <i class="bi bi-moon-stars dark-mode-icon-light"></i>
                                        <i class="bi bi-sun dark-mode-icon-dark hidden"></i>
                                        <span class="dark-mode-text-light">Dark Mode</span>
                                        <span class="dark-mode-text-dark hidden">Light Mode</span>
                                    </button>
                                </li>
                                <div class="divider my-1"></div>
                                <li>
                                    <a href="{% url 'users:logout' %}" class="text-sm text-error hover:bg-error/10">
                                        <i class="bi bi-box-arrow-right"></i>
                                        Sign Out
                                    </a>
                                </li>
                            </ul>
                        </div>
                    {% else %}
                        <a href="{% url 'users:login' %}" class="btn btn-ghost btn-sm text-white hover:bg-white/10">
                            Sign In
                        </a>
                        <a href="{% url 'users:register' %}" class="btn btn-sm bg-white text-primary-900 hover:bg-white/90 border-0">
                            Get Started
                        </a>
                    {% endif %}
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            {% if user.is_authenticated %}
            <div class="md:hidden pb-4 pt-2 border-t border-primary-800">
                <div class="flex flex-col gap-1">
                    <a href="{% url 'expenses:dashboard' %}" 
                       class="px-4 py-2 text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">
                        Dashboard
                    </a>
                    <a href="{% url 'expenses:transactions' %}" 
                       class="px-4 py-2 text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">
                        Transactions
                    </a>
                    <a href="{% url 'expenses:view_budget' %}" 
                       class="px-4 py-2 text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">
                        Budgets
                    </a>
                </div>
            </div>
            {% endif %}
        </nav>
    </header>
    
    <!-- Main Content -->
    <main class="min-h-[calc(100vh-4rem)]">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Professional Footer -->
    <footer class="bg-white dark:bg-slate-900 border-t border-base-300 dark:border-slate-800 mt-auto transition-colors duration-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
                <div class="flex items-center gap-2">
                    <i class="bi bi-wallet2 text-primary-900 dark:text-slate-100"></i>
                    <span class="text-sm font-semibold text-primary-900 dark:text-slate-100">Hisaab Finance</span>
                </div>
                <div class="text-sm text-base-content/60 dark:text-slate-400">
                    Â© 2026 Hisaab Finance. Professional grade tracking.
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Dark Mode Script -->
    <script>
        // Initialize dark mode from localStorage
        function initDarkMode() {
            const isDark = localStorage.getItem('darkMode') === 'true';
            if (isDark) {
                document.documentElement.classList.add('dark');
                updateDarkModeUI(true);
            }
        }
        
        // Toggle dark mode
        function toggleDarkMode() {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.setItem('darkMode', isDark);
            updateDarkModeUI(isDark);
        }
        
        // Update UI elements
        function updateDarkModeUI(isDark) {
            const lightIcons = document.querySelectorAll('.dark-mode-icon-light');
            const darkIcons = document.querySelectorAll('.dark-mode-icon-dark');
            const lightText = document.querySelectorAll('.dark-mode-text-light');
            const darkText = document.querySelectorAll('.dark-mode-text-dark');
            
            lightIcons.forEach(el => el.classList.toggle('hidden', isDark));
            darkIcons.forEach(el => el.classList.toggle('hidden', !isDark));
            lightText.forEach(el => el.classList.toggle('hidden', isDark));
            darkText.forEach(el => el.classList.toggle('hidden', !isDark));
        }
        
        // Run on page load
        initDarkMode();
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
